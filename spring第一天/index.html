<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Spring第一天 - Young2.0</title><meta name="Description" content="欢迎来到我的博客网站"><meta property="og:title" content="Spring第一天" />
<meta property="og:description" content="一、Spring简介 1 Spring介绍 问题导入 我们为什么要学习Spring框架？ 1.1 为什么要学 Spring技术是JavaEE开发必备技能，企业" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://yhaiyong.github.io/spring%E7%AC%AC%E4%B8%80%E5%A4%A9/" /><meta property="og:image" content="http://yhaiyong.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-06T20:22:55+08:00" />
<meta property="article:modified_time" content="2022-09-06T20:22:55+08:00" /><meta property="og:site_name" content="我的网站" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://yhaiyong.github.io/logo.png"/>

<meta name="twitter:title" content="Spring第一天"/>
<meta name="twitter:description" content="一、Spring简介 1 Spring介绍 问题导入 我们为什么要学习Spring框架？ 1.1 为什么要学 Spring技术是JavaEE开发必备技能，企业"/>
<meta name="application-name" content="我的网站">
<meta name="apple-mobile-web-app-title" content="我的网站"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://yhaiyong.github.io/spring%E7%AC%AC%E4%B8%80%E5%A4%A9/" /><link rel="prev" href="http://yhaiyong.github.io/mysql/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Spring第一天",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/yhaiyong.github.io\/spring%E7%AC%AC%E4%B8%80%E5%A4%A9\/"
        },"genre": "posts","wordcount":  12659 ,
        "url": "http:\/\/yhaiyong.github.io\/spring%E7%AC%AC%E4%B8%80%E5%A4%A9\/","datePublished": "2022-09-06T20:22:55+08:00","dateModified": "2022-09-06T20:22:55+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Young"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Young2.0">Young</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Young2.0">Young</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Spring第一天</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Young</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-09-06">2022-09-06</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;12659 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;26 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#一spring简介">一、Spring简介</a>
      <ul>
        <li><a href="#1-spring介绍">1 Spring介绍</a>
          <ul>
            <li><a href="#问题导入">问题导入</a></li>
            <li><a href="#11-为什么要学">1.1 为什么要学</a></li>
            <li><a href="#12-学什么">1.2 学什么</a></li>
            <li><a href="#13-怎么学">1.3 怎么学</a></li>
          </ul>
        </li>
        <li><a href="#2-初识spring">2 初识Spring</a>
          <ul>
            <li><a href="#问题导入-1">问题导入</a></li>
            <li><a href="#21-spring家族">2.1 Spring家族</a></li>
            <li><a href="#22-spring发展史">2.2 Spring发展史</a></li>
          </ul>
        </li>
        <li><a href="#3-spring体系结构">3 Spring体系结构</a>
          <ul>
            <li><a href="#问题导入-2">问题导入</a></li>
            <li><a href="#31-spring-framework系统架构图">3.1 Spring Framework系统架构图</a></li>
            <li><a href="#32-spring-framework课程学习路线">3.2 Spring Framework课程学习路线</a></li>
          </ul>
        </li>
        <li><a href="#4-spring核心概念">4 Spring核心概念</a>
          <ul>
            <li><a href="#问题导入-3">问题导入</a></li>
            <li><a href="#41-目前我们代码存在的问题">4.1 目前我们代码存在的问题</a></li>
            <li><a href="#42-核心概念">4.2 核心概念</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#二ioc和di入门案例重点">二、IOC和DI入门案例【重点】</a>
      <ul>
        <li><a href="#1-ioc入门案例重点">1 IOC入门案例【重点】</a>
          <ul>
            <li><a href="#问题导入-4">问题导入</a></li>
            <li><a href="#11-门案例思路分析">1.1 门案例思路分析</a></li>
            <li><a href="#12-实现步骤">1.2 实现步骤</a></li>
            <li><a href="#13-实现代码">1.3 实现代码</a></li>
            <li><a href="#14-运行结果">1.4 运行结果</a></li>
          </ul>
        </li>
        <li><a href="#2-di入门案例重点">2 DI入门案例【重点】</a>
          <ul>
            <li><a href="#问题导入-5">问题导入</a></li>
            <li><a href="#21-di入门案例思路分析">2.1 DI入门案例思路分析</a></li>
            <li><a href="#22-实现步骤">2.2 实现步骤</a></li>
            <li><a href="#23-实现代码">2.3 实现代码</a></li>
            <li><a href="#24-图解演示">2.4 图解演示</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#三bean的基础配置">三、Bean的基础配置</a>
      <ul>
        <li><a href="#问题导入-6">问题导入</a></li>
        <li><a href="#1-bean基础配置重点">1 Bean基础配置【重点】</a>
          <ul>
            <li><a href="#配置说明">配置说明</a></li>
            <li><a href="#代码演示">代码演示</a></li>
            <li><a href="#运行结果">运行结果</a></li>
          </ul>
        </li>
        <li><a href="#2-bean别名配置">2 Bean别名配置</a>
          <ul>
            <li><a href="#配置说明-1">配置说明</a></li>
            <li><a href="#代码演示-1">代码演示</a></li>
            <li><a href="#打印结果">打印结果</a></li>
          </ul>
        </li>
        <li><a href="#3-bean作用范围配置重点">3 Bean作用范围配置【重点】</a>
          <ul>
            <li><a href="#配置说明-2">配置说明</a></li>
            <li><a href="#代码演示-2">代码演示</a></li>
            <li><a href="#打印结果-1">打印结果</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#四bean的实例化">四、Bean的实例化</a>
      <ul>
        <li><a href="#问题导入-7">问题导入</a></li>
        <li><a href="#1-bean是如何创建的理解">1 Bean是如何创建的【理解】</a></li>
        <li><a href="#2-实例化bean的三种方式">2 实例化Bean的三种方式</a>
          <ul>
            <li><a href="#21-构造方法方式重点">2.1 构造方法方式【重点】</a></li>
            <li><a href="#22-静态工厂方式">2.2 静态工厂方式</a></li>
            <li><a href="#23-实例工厂方式">2.3 实例工厂方式</a></li>
            <li><a href="#24-实现factorybeant方式扩展了解">2.4 实现FactoryBean&lt;T&gt;方式【扩展,了解】</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#五bean的生命周期了解">五、Bean的生命周期【了解】</a>
      <ul>
        <li><a href="#问题导入-8">问题导入</a></li>
        <li><a href="#1-生命周期相关概念介绍">1 生命周期相关概念介绍</a></li>
        <li><a href="#2-代码演示">2 代码演示</a>
          <ul>
            <li><a href="#21-bean生命周期控制">2.1 Bean生命周期控制</a></li>
            <li><a href="#22-bean生命周期控制">2.2 Bean生命周期控制</a></li>
          </ul>
        </li>
        <li><a href="#3-bean销毁时机">3 Bean销毁时机</a></li>
      </ul>
    </li>
    <li><a href="#六依赖注入di配置">六、依赖注入(DI配置)</a>
      <ul>
        <li><a href="#1-依赖注入方式重点">1 依赖注入方式【重点】</a>
          <ul>
            <li><a href="#问题导入-9">问题导入</a></li>
            <li><a href="#11-依赖注入的两种方式">1.1 依赖注入的两种方式</a></li>
            <li><a href="#12-setter方式注入">1.2 setter方式注入</a>
              <ul>
                <li><a href="#问题导入-10">问题导入</a></li>
                <li><a href="#引用类型">引用类型</a></li>
                <li><a href="#简单类型">简单类型</a></li>
              </ul>
            </li>
            <li><a href="#13-构造方式注入">1.3 构造方式注入</a>
              <ul>
                <li><a href="#问题导入-11">问题导入</a></li>
                <li><a href="#引用类型-1">引用类型</a></li>
                <li><a href="#简单类型-1">简单类型</a></li>
                <li><a href="#参数适配了解">参数适配【了解】</a></li>
              </ul>
            </li>
            <li><a href="#14-依赖注入方式选择">1.4 依赖注入方式选择</a></li>
          </ul>
        </li>
        <li><a href="#2-依赖自动装配理解">2 依赖自动装配【理解】</a>
          <ul>
            <li><a href="#问题导入-12">问题导入</a></li>
            <li><a href="#21-自动装配概念">2.1 自动装配概念</a></li>
            <li><a href="#22-自动装配类型">2.2 自动装配类型</a>
              <ul>
                <li><a href="#依赖自动装配">依赖自动装配</a></li>
                <li><a href="#依赖自动装配特征">依赖自动装配特征</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#3-集合注入">3 集合注入</a>
          <ul>
            <li><a href="#31-注入数组类型数据">3.1 注入数组类型数据</a></li>
            <li><a href="#32-注入list类型数据">3.2 注入List类型数据</a></li>
            <li><a href="#33-注入set类型数据">3.3 注入Set类型数据</a></li>
            <li><a href="#34-注入map类型数据">3.4 注入Map类型数据</a></li>
            <li><a href="#35-注入properties类型数据">3.5 注入Properties类型数据</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#今日目标">今日目标</a></li>
    <li><a href="#一第三方资源配置管理">一、第三方资源配置管理</a>
      <ul>
        <li><a href="#1-管理datasource连接池对象">1 管理DataSource连接池对象</a>
          <ul>
            <li><a href="#问题导入-13">问题导入</a></li>
            <li><a href="#11-管理druid连接池重点">1.1 管理Druid连接池【重点】</a></li>
            <li><a href="#12-管理c3p0连接池">1.2 管理c3p0连接池</a></li>
          </ul>
        </li>
        <li><a href="#2-加载properties属性文件重点">2 加载properties属性文件【重点】</a>
          <ul>
            <li><a href="#问题导入-14">问题导入</a></li>
            <li><a href="#21-基本用法">2.1 基本用法</a></li>
            <li><a href="#22-配置不加载系统属性">2.2 配置不加载系统属性</a></li>
            <li><a href="#23-加载properties文件写法">2.3 加载properties文件写法</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#二spring容器">二、Spring容器</a>
      <ul>
        <li><a href="#1-spring核心容器介绍">1 Spring核心容器介绍</a>
          <ul>
            <li><a href="#问题导入-15">问题导入</a></li>
            <li><a href="#11-创建容器">1.1 创建容器</a></li>
            <li><a href="#12-获取bean对象">1.2 获取bean对象</a></li>
            <li><a href="#13-容器类层次结构">1.3 容器类层次结构</a></li>
            <li><a href="#14-beanfactory">1.4 BeanFactory</a></li>
          </ul>
        </li>
        <li><a href="#2-spring核心容器总结">2 Spring核心容器总结</a>
          <ul>
            <li><a href="#21-容器相关">2.1 容器相关</a></li>
            <li><a href="#22-bean相关">2.2 bean相关</a></li>
            <li><a href="#23-依赖注入相关">2.3 依赖注入相关</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#三spring注解开发">三、Spring注解开发</a>
      <ul>
        <li><a href="#1-注解开发定义bean对象重点">1 注解开发定义Bean对象【重点】</a>
          <ul>
            <li><a href="#问题导入-16">问题导入</a></li>
            <li><a href="#11-基本使用">1.1 基本使用</a></li>
            <li><a href="#12-component三个衍生注解">1.2 @Component三个衍生注解</a></li>
          </ul>
        </li>
        <li><a href="#2-纯注解开发模式重点">2 纯注解开发模式【重点】</a>
          <ul>
            <li><a href="#问题导入-17">问题导入</a></li>
            <li><a href="#21-纯注解开发模式介绍">2.1 纯注解开发模式介绍</a></li>
            <li><a href="#22-代码演示">2.2 代码演示</a></li>
          </ul>
        </li>
        <li><a href="#3-注解开发bean作用范围和生命周期管理">3 注解开发Bean作用范围和生命周期管理</a>
          <ul>
            <li><a href="#问题导入-18">问题导入</a></li>
            <li><a href="#31-bean作用范围注解配置">3.1 bean作用范围注解配置</a></li>
            <li><a href="#32-bean生命周期注解配置">3.2 bean生命周期注解配置</a></li>
          </ul>
        </li>
        <li><a href="#4-注解开发依赖注入重点">4 注解开发依赖注入【重点】</a>
          <ul>
            <li><a href="#问题导入-19">问题导入</a></li>
            <li><a href="#41-使用autowired注解开启自动装配模式按类型">4.1 使用@Autowired注解开启自动装配模式（按类型）</a></li>
            <li><a href="#42-使用qualifier注解指定要装配的bean名称">4.2 使用@Qualifier注解指定要装配的bean名称</a></li>
            <li><a href="#43-使用value实现简单类型注入">4.3 使用@Value实现简单类型注入</a></li>
          </ul>
        </li>
        <li><a href="#5-注解开发管理第三方bean重点">5 注解开发管理第三方Bean【重点】</a>
          <ul>
            <li><a href="#问题导入-20">问题导入</a></li>
            <li><a href="#第一步单独定义配置类"><strong>【第一步】单独定义配置类</strong></a></li>
            <li><a href="#第二步将独立的配置类加入核心配置"><strong>【第二步】将独立的配置类加入核心配置</strong></a>
              <ul>
                <li><a href="#方式1import注解导入式">方式1：@Import注解导入式</a></li>
                <li><a href="#方式2componentscan扫描式">方式2：@ComponentScan扫描式</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#6-注解开发为第三方bean注入资源重点">6 注解开发为第三方Bean注入资源【重点】</a>
          <ul>
            <li><a href="#问题导入-21">问题导入</a></li>
            <li><a href="#61-简单类型依赖注入">6.1 简单类型依赖注入</a></li>
            <li><a href="#62-引用类型依赖注入">6.2 引用类型依赖注入</a></li>
          </ul>
        </li>
        <li><a href="#7-注解开发总结">7 注解开发总结</a></li>
      </ul>
    </li>
    <li><a href="#四spring整合其他技术重点">四、Spring整合其他技术【重点】</a>
      <ul>
        <li><a href="#1-spring整合mybatis重点">1 Spring整合mybatis【重点】</a>
          <ul>
            <li><a href="#11-思路分析">1.1 思路分析</a>
              <ul>
                <li><a href="#问题导入-22">问题导入</a></li>
                <li><a href="#111-mybatis程序核心对象分析">1.1.1 MyBatis程序核心对象分析</a></li>
                <li><a href="#112-整合mybatis">1.1.2 整合MyBatis</a></li>
              </ul>
            </li>
            <li><a href="#12-代码实现">1.2 代码实现</a>
              <ul>
                <li><a href="#问题导入-23">问题导入</a></li>
                <li><a href="#前置工作">【前置工作】</a></li>
                <li><a href="#第一步导入spring整合mybatis依赖"><strong>【第一步】导入Spring整合Mybatis依赖</strong></a></li>
                <li><a href="#第二步创建jdbcconfig配置datasource数据源"><strong>【第二步】创建JdbcConfig配置DataSource数据源</strong></a></li>
                <li><a href="#第三步创建mybatisconfig整合mybatis"><strong>【第三步】创建MybatisConfig整合mybatis</strong></a></li>
                <li><a href="#第四步创建springconfig主配置类进行包扫描和加载其他配置类"><strong>【第四步】创建SpringConfig主配置类进行包扫描和加载其他配置类</strong></a></li>
                <li><a href="#第五步定义测试类进行测试"><strong>【第五步】定义测试类进行测试</strong></a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#2-spring整合junit单元测试重点">2 Spring整合Junit单元测试【重点】</a>
          <ul>
            <li><a href="#问题导入-24">问题导入</a></li>
            <li><a href="#第一步导入整合的依赖坐标spring-test">【第一步】导入整合的依赖坐标spring-test</a></li>
            <li><a href="#第二步使用spring整合junit专用的类加载器">【第二步】使用Spring整合Junit专用的类加载器</a></li>
            <li><a href="#第三步加载配置文件或者配置类">【第三步】加载配置文件或者配置类</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="一spring简介">一、Spring简介</h2>
<h3 id="1-spring介绍">1 Spring介绍</h3>
<h4 id="问题导入">问题导入</h4>
<p>我们为什么要学习Spring框架？</p>
<h4 id="11-为什么要学">1.1 为什么要学</h4>
<ul>
<li>
<p>Spring技术是JavaEE开发必备技能，企业开发技术选型命中率&gt;==90%==</p>
</li>
<li>
<p>专业角度</p>
<ul>
<li>==<strong>简化开发</strong>==，降低企业级开发的复杂性</li>
<li><strong>==框架整合==</strong>，高效整合其他技术，提高企业级应用开发与运行效率</li>
</ul>
</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729171139088.png"
        data-srcset="/assets/image-20210729171139088.png, /assets/image-20210729171139088.png 1.5x, /assets/image-20210729171139088.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729171139088.png"
        title="image-20210729171139088" /></p>
<h4 id="12-学什么">1.2 学什么</h4>
<ul>
<li>
<p>简化开发</p>
<ul>
<li>==IOC(反转控制)==</li>
<li>==AOP(面向切面编程)==
<ul>
<li>==事务处理==</li>
</ul>
</li>
</ul>
</li>
<li>
<p>框架整合</p>
<ul>
<li>MyBatis</li>
<li>MyBatis-plus</li>
<li>Struts</li>
<li>Struts2</li>
<li>Hibernate</li>
<li>……</li>
</ul>
</li>
</ul>
<h4 id="13-怎么学">1.3 怎么学</h4>
<ul>
<li>学习Spring框架设计思想</li>
<li>学习基础操作，思考操作与思想间的联系</li>
<li>学习案例，熟练应用操作的同时，体会思想</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729171346022.png"
        data-srcset="/assets/image-20210729171346022.png, /assets/image-20210729171346022.png 1.5x, /assets/image-20210729171346022.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729171346022.png"
        title="image-20210729171346022" /></p>
<h3 id="2-初识spring">2 初识Spring</h3>
<h4 id="问题导入-1">问题导入</h4>
<p>目前我们使用的是Spring几版本？</p>
<h4 id="21-spring家族">2.1 Spring家族</h4>
<ul>
<li>官网：https://spring.io</li>
<li>Spring发展到今天已经形成了一种开发的生态圈，Spring提供了若干个项目，每个项目用于完成特定的功能。</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729171850181.png"
        data-srcset="/assets/image-20210729171850181.png, /assets/image-20210729171850181.png 1.5x, /assets/image-20210729171850181.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729171850181.png"
        title="image-20210729171850181" /></p>
<h4 id="22-spring发展史">2.2 Spring发展史</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729171926576.png"
        data-srcset="/assets/image-20210729171926576.png, /assets/image-20210729171926576.png 1.5x, /assets/image-20210729171926576.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729171926576.png"
        title="image-20210729171926576" /></p>
<h3 id="3-spring体系结构">3 Spring体系结构</h3>
<h4 id="问题导入-2">问题导入</h4>
<p>通过系统架构6图，Spring能不能进行数据层开发？Spring能不能进行web层开发？</p>
<h4 id="31-spring-framework系统架构图">3.1 Spring Framework系统架构图</h4>
<ul>
<li>Spring Framework是Spring生态圈中最基础的项目，是其他项目 的根基</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729172153796.png"
        data-srcset="/assets/image-20210729172153796.png, /assets/image-20210729172153796.png 1.5x, /assets/image-20210729172153796.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729172153796.png"
        title="image-20210729172153796" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729172352627.png"
        data-srcset="/assets/image-20210729172352627.png, /assets/image-20210729172352627.png 1.5x, /assets/image-20210729172352627.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729172352627.png"
        title="image-20210729172352627" /></p>
<h4 id="32-spring-framework课程学习路线">3.2 Spring Framework课程学习路线</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729172513669.png"
        data-srcset="/assets/image-20210729172513669.png, /assets/image-20210729172513669.png 1.5x, /assets/image-20210729172513669.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729172513669.png"
        title="image-20210729172513669" /></p>
<h3 id="4-spring核心概念">4 Spring核心概念</h3>
<h4 id="问题导入-3">问题导入</h4>
<p>问题1：目前我们的代码存在什么问题以及怎么解决这些问题？</p>
<p>问题2：请描述什么是IOC，什么是DI？</p>
<h4 id="41-目前我们代码存在的问题">4.1 目前我们代码存在的问题</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729173516149.png"
        data-srcset="/assets/image-20210729173516149.png, /assets/image-20210729173516149.png 1.5x, /assets/image-20210729173516149.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729173516149.png"
        title="image-20210729173516149" /></p>
<ul>
<li>代码书写现状
<ul>
<li>耦合度偏高</li>
</ul>
</li>
<li>解决方案
<ul>
<li>使用对象时，在程序中不要主动使用new产生对象，转换为由外部提供对象</li>
</ul>
</li>
</ul>
<h4 id="42-核心概念">4.2 核心概念</h4>
<ul>
<li>
<p>==IOC（Inversion of Control）控制反转==</p>
<p>使用对象时，由主动new产生对象转换为<strong>由==外部==提供对象</strong>，此过程中对象创建控制权由程序转移到外部，此思想称为控制反转。通俗的讲就是“==将new对象的权利交给Spring，我们从Sprin g中获取对象使用即可==”</p>
</li>
<li>
<p>Spring技术对IoC思想进行了实现</p>
<ul>
<li>Spring提供了一个容器，称为==IOC容器==，用来充当IoC思想中的“外部”</li>
<li>IOC容器负责对象的创建、初始化等一系列工作，被创建或被管理的对象在IoC容器中统称为==Bean==</li>
</ul>
</li>
<li>
<p>==DI（Dependency Injection）依赖注入==</p>
<ul>
<li>在容器中建立bean与bean之间的依赖关系的整个过程，称为依赖注入。</li>
</ul>
</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729174148134.png"
        data-srcset="/assets/image-20210729174148134.png, /assets/image-20210729174148134.png 1.5x, /assets/image-20210729174148134.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729174148134.png"
        title="image-20210729174148134" /></p>
<ul>
<li>目标：充分解耦
<ul>
<li>使用IoC容器管理bean（IOC)</li>
<li>在IoC容器内将有依赖关系的bean进行关系绑定（DI）</li>
</ul>
</li>
<li>最终效果
<ul>
<li>使用对象时不仅可以直接从IoC容器中获取，并且获取到的bean已经绑定了所有的依赖关系</li>
</ul>
</li>
</ul>
<h2 id="二ioc和di入门案例重点">二、IOC和DI入门案例【重点】</h2>
<h3 id="1-ioc入门案例重点">1 IOC入门案例【重点】</h3>
<h4 id="问题导入-4">问题导入</h4>
<p>&lt;bean&gt;标签中id属性和class属性的作用是什么？</p>
<h4 id="11-门案例思路分析">1.1 门案例思路分析</h4>
<ol>
<li>管理什么？(Service与Dao)</li>
<li>如何将被管理的对象告知IOC容器？(配置文件)</li>
<li>被管理的对象交给IOC容器，如何获取到IoC容器？(接口)</li>
<li>IOC容器得到后，如何从容器中获取bean？(接口方法)</li>
<li>使用Spring导入哪些坐标？(pom.xml)</li>
</ol>
<h4 id="12-实现步骤">1.2 实现步骤</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">【第一步】导入Spring坐标
</span></span><span class="line"><span class="cl">【第二步】定义Spring管理的类（接口）
</span></span><span class="line"><span class="cl">【第三步】创建Spring配置文件，配置对应类作为Spring管理的bean对象
</span></span><span class="line"><span class="cl">【第四步】初始化IOC容器（Spring核心容器/Spring容器），通过容器获取bean对象
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="13-实现代码">1.3 实现代码</h4>
<p><strong>【第一步】导入Spring坐标</strong></p>
<ul>
<li>先配置依赖才能创建spring配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--导入spring的坐标spring-context，对应版本是5.2.10.RELEASE--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>5.2.10.RELEASE<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第二步】定义Spring管理的类（接口）</strong></p>
<ul>
<li>BookDao接口和BookDaoImpl实现类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book dao save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>BookService接口和BookServiceImpl实现类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BookDaoImpl</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book service save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第三步】创建Spring配置文件，配置对应类作为Spring管理的bean对象</strong></p>
<ul>
<li>定义applicationContext.xml配置文件并配置BookServiceImpl</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--
</span></span></span><span class="line"><span class="cl"><span class="c">		bean标签：表示配置bean
</span></span></span><span class="line"><span class="cl"><span class="c">    	id属性：表示给bean起名字
</span></span></span><span class="line"><span class="cl"><span class="c">    	class属性：表示给bean定义类型
</span></span></span><span class="line"><span class="cl"><span class="c">	--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bookService&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.service.impl.BookServiceImpl&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>==注意事项：bean定义时id属性在同一个上下文中(IOC容器中)不能重复==</strong></p>
<p><strong>【第四步】初始化IOC容器（Spring核心容器/Spring容器），通过容器获取Bean对象</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//1.创建IoC容器对象，加载spring核心配置文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//2 从IOC容器中获取Bean对象(BookService对象)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">BookService</span> <span class="n">bookService</span><span class="o">=</span> <span class="o">(</span><span class="n">BookService</span><span class="o">)</span><span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookService&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//3 调用Bean对象(BookService对象)的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">bookService</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="14-运行结果">1.4 运行结果</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729184337603.png"
        data-srcset="/assets/image-20210729184337603.png, /assets/image-20210729184337603.png 1.5x, /assets/image-20210729184337603.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729184337603.png"
        title="image-20210729184337603" /></p>
<h3 id="2-di入门案例重点">2 DI入门案例【重点】</h3>
<h4 id="问题导入-5">问题导入</h4>
<p>&lt;property&gt;标签中name属性和ref属性的作用是什么？</p>
<h4 id="21-di入门案例思路分析">2.1 DI入门案例思路分析</h4>
<ol>
<li>基于IOC管理bean</li>
<li>Service中使用new形式创建的Dao对象是否保留？(否)</li>
<li>Service中需要的Dao对象如何进入到Service中？(提供方法)</li>
<li>Service与Dao间的关系如何描述？(配置)</li>
</ol>
<h4 id="22-实现步骤">2.2 实现步骤</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">【第一步】删除使用new的形式创建对象的代码
</span></span><span class="line"><span class="cl">【第二步】提供依赖对象对应的setter方法
</span></span><span class="line"><span class="cl">【第三步】配置service与dao之间的关系
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="23-实现代码">2.3 实现代码</h4>
<p><strong>【第一步】删除使用new的形式创建对象的代码</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">;</span>  <span class="c1">//【第一步】删除使用new的形式创建对象的代码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book service save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第二步】提供依赖对象对应的setter方法</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book service save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//【第二步】提供依赖对象对应的setter方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBookDao</span><span class="o">(</span><span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">bookDao</span> <span class="o">=</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第三步】配置service与dao之间的关系</strong></p>
<blockquote>
<p>在applicationContext.xml中配置</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--
</span></span></span><span class="line"><span class="cl"><span class="c">		bean标签：表示配置bean
</span></span></span><span class="line"><span class="cl"><span class="c">    	id属性：表示给bean起名字
</span></span></span><span class="line"><span class="cl"><span class="c">    	class属性：表示给bean定义类型
</span></span></span><span class="line"><span class="cl"><span class="c">	--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bookDao&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bookService&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.service.impl.BookServiceImpl&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--配置server与dao的关系
</span></span></span><span class="line"><span class="cl"><span class="c">			property标签：表示配置当前bean的属性
</span></span></span><span class="line"><span class="cl"><span class="c">        	name属性：表示配置哪一个具体的属性
</span></span></span><span class="line"><span class="cl"><span class="c">        	ref属性：表示参照哪一个bean
</span></span></span><span class="line"><span class="cl"><span class="c">		--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;bookDao&#34;</span> <span class="na">ref=</span><span class="s">&#34;bookDao&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="24-图解演示">2.4 图解演示</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729183104748.png"
        data-srcset="/assets/image-20210729183104748.png, /assets/image-20210729183104748.png 1.5x, /assets/image-20210729183104748.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729183104748.png"
        title="image-20210729183104748" /></p>
<h2 id="三bean的基础配置">三、Bean的基础配置</h2>
<h3 id="问题导入-6">问题导入</h3>
<p>问题1：在&lt;bean&gt;标签上如何配置别名？</p>
<p>问题2：Bean的默认作用范围是什么？如何修改？</p>
<h3 id="1-bean基础配置重点">1 Bean基础配置【重点】</h3>
<h4 id="配置说明">配置说明</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729183500978.png"
        data-srcset="/assets/image-20210729183500978.png, /assets/image-20210729183500978.png 1.5x, /assets/image-20210729183500978.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729183500978.png"
        title="image-20210729183500978" /></p>
<h4 id="代码演示">代码演示</h4>
<blockquote>
<p>见《IOC入门案例》applicationContext.xml配置</p>
</blockquote>
<h4 id="运行结果">运行结果</h4>
<blockquote>
<p>见《IOC入门案例》运行结果</p>
</blockquote>
<h3 id="2-bean别名配置">2 Bean别名配置</h3>
<h4 id="配置说明-1">配置说明</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729183558051.png"
        data-srcset="/assets/image-20210729183558051.png, /assets/image-20210729183558051.png 1.5x, /assets/image-20210729183558051.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729183558051.png"
        title="image-20210729183558051" /></p>
<h4 id="代码演示-1">代码演示</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729191924626.png"
        data-srcset="/assets/image-20210729191924626.png, /assets/image-20210729191924626.png 1.5x, /assets/image-20210729191924626.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729191924626.png"
        title="image-20210729191924626" /></p>
<h4 id="打印结果">打印结果</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729191954870.png"
        data-srcset="/assets/image-20210729191954870.png, /assets/image-20210729191954870.png 1.5x, /assets/image-20210729191954870.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729191954870.png"
        title="image-20210729191954870" /></p>
<h3 id="3-bean作用范围配置重点">3 Bean作用范围配置【重点】</h3>
<h4 id="配置说明-2">配置说明</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729183628138.png"
        data-srcset="/assets/image-20210729183628138.png, /assets/image-20210729183628138.png 1.5x, /assets/image-20210729183628138.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729183628138.png"
        title="image-20210729183628138" /></p>
<blockquote>
<p>扩展：scope的取值不仅仅只有singleton和prototype，还有request、session、application、 websocket ，表示创建出的对象放置在web容器(tomcat)对应的位置。比如：request表示保存到request域中。</p>
</blockquote>
<h4 id="代码演示-2">代码演示</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729192420048.png"
        data-srcset="/assets/image-20210729192420048.png, /assets/image-20210729192420048.png 1.5x, /assets/image-20210729192420048.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729192420048.png"
        title="image-20210729192420048" /></p>
<h4 id="打印结果-1">打印结果</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729192730871.png"
        data-srcset="/assets/image-20210729192730871.png, /assets/image-20210729192730871.png 1.5x, /assets/image-20210729192730871.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729192730871.png"
        title="image-20210729192730871" /></p>
<blockquote>
<p>最后给大家说明一下：在我们的实际开发当中，绝大部分的Bean是单例的，也就是说绝大部分Bean不需要配置scope属性。</p>
</blockquote>
<blockquote>
<p>适合交给容器管理的bean</p>
<ul>
<li>表现层对象</li>
<li>业务层对象</li>
<li>数据层对象</li>
<li>工具对象</li>
</ul>
</blockquote>
<p>不适合交给容器管理的对象</p>
<ul>
<li>封装实体的域对象</li>
</ul>
<h2 id="四bean的实例化">四、Bean的实例化</h2>
<h3 id="问题导入-7">问题导入</h3>
<p>Bean的实例化方式有几种？</p>
<h3 id="1-bean是如何创建的理解">1 Bean是如何创建的【理解】</h3>
<p>bean本质上就是对象，创建bean使用构造方法完成</p>
<h3 id="2-实例化bean的三种方式">2 实例化Bean的三种方式</h3>
<h4 id="21-构造方法方式重点">2.1 构造方法方式【重点】</h4>
<ul>
<li>BookDaoImpl实现类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">BookDaoImpl</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book dao constructor is running ....&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book dao save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>applicationContext.xml配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--方式一：构造方法实例化bean--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bookDao&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>AppForInstanceBook测试类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppForInstanceBook</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">BookDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>运行结果</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729194137151.png"
        data-srcset="/assets/image-20210729194137151.png, /assets/image-20210729194137151.png 1.5x, /assets/image-20210729194137151.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729194137151.png"
        title="image-20210729194137151" /></p>
<p>==注意：无参构造方法如果不存在，将抛出异常<code>BeanCreationException</code>==</p>
<h4 id="22-静态工厂方式">2.2 静态工厂方式</h4>
<ul>
<li>OrderDao接口和OrderDaoImpl实现类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OrderDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderDaoImpl</span> <span class="kd">implements</span> <span class="n">OrderDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;order dao save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>OrderDaoFatory工厂类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//静态工厂创建对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderDaoFactory</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">OrderDao</span> <span class="nf">getOrderDao</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;factory setup....&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">OrderDaoImpl</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>applicationContext.xml配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--方式二：使用静态工厂实例化bean--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;orderDao&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.factory.OrderDaoFactory&#34;</span> <span class="na">factory-method=</span><span class="s">&#34;getOrderDao&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729195248948.png"
        data-srcset="/assets/image-20210729195248948.png, /assets/image-20210729195248948.png 1.5x, /assets/image-20210729195248948.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729195248948.png"
        title="image-20210729195248948" /></p>
<ul>
<li>AppForInstanceOrder测试类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppForInstanceOrder</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">OrderDao</span> <span class="n">orderDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">OrderDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;orderDao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">orderDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>运行结果</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729195009198.png"
        data-srcset="/assets/image-20210729195009198.png, /assets/image-20210729195009198.png 1.5x, /assets/image-20210729195009198.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729195009198.png"
        title="image-20210729195009198" /></p>
<h4 id="23-实例工厂方式">2.3 实例工厂方式</h4>
<ul>
<li>UserDao接口和UserDaoImpl实现类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDaoImpl</span> <span class="kd">implements</span> <span class="n">UserDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;user dao save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>UserDaoFactory工厂类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//实例工厂创建对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDaoFactory</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">UserDao</span> <span class="nf">getUserDao</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">UserDaoImpl</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>applicationContext.xml配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--方式三：使用实例工厂实例化bean--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;userFactory&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.factory.UserDaoFactory&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;userDao&#34;</span> <span class="na">factory-method=</span><span class="s">&#34;getUserDao&#34;</span> <span class="na">factory-bean=</span><span class="s">&#34;userFactory&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729200203249.png"
        data-srcset="/assets/image-20210729200203249.png, /assets/image-20210729200203249.png 1.5x, /assets/image-20210729200203249.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729200203249.png"
        title="image-20210729200203249" /></p>
<ul>
<li>AppForInstanceUser测试类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppForInstanceUser</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//        //创建实例工厂对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//        UserDaoFactory userDaoFactory = new UserDaoFactory();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//        //通过实例工厂对象创建对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//        UserDao userDao = userDaoFactory.getUserDao();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//        userDao.save();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">UserDao</span> <span class="n">userDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">UserDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;userDao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">userDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>运行结果</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729200240820.png"
        data-srcset="/assets/image-20210729200240820.png, /assets/image-20210729200240820.png 1.5x, /assets/image-20210729200240820.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729200240820.png"
        title="image-20210729200240820" /></p>
<h4 id="24-实现factorybeant方式扩展了解">2.4 实现FactoryBean&lt;T&gt;方式【扩展,了解】</h4>
<ul>
<li>定义UserDaoFactoryBean实现FactoryBean&lt;UserDao&gt;</li>
</ul>
<blockquote>
<p>UserDaoFactoryBean中实例化什么类型的对象泛型就是该类型。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//FactoryBean创建对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDaoFactoryBean</span> <span class="kd">implements</span> <span class="n">FactoryBean</span><span class="o">&lt;</span><span class="n">UserDao</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//代替原始实例工厂中创建对象的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="n">UserDao</span> <span class="nf">getObject</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">UserDaoImpl</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">getObjectType</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">UserDao</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>applicationContext.xml配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--方式四：使用FactoryBean实例化bean--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;userDao&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.factory.UserDaoFactoryBean&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>使用之前的AppForInstanceUser测试类去运行看结果就行了。注意配置文件中id=&ldquo;userDao&quot;是否重复。</p>
</blockquote>
<h2 id="五bean的生命周期了解">五、Bean的生命周期【了解】</h2>
<h3 id="问题导入-8">问题导入</h3>
<p>问题1：多例的Bean能够配置并执行销毁的方法？</p>
<p>问题2：如何做才执行Bean销毁的方法？</p>
<h3 id="1-生命周期相关概念介绍">1 生命周期相关概念介绍</h3>
<ul>
<li>生命周期：从创建到消亡的完整过程</li>
<li>bean生命周期：bean从创建到销毁的整体过程</li>
<li>bean生命周期控制：在bean创建后到销毁前做一些事情</li>
</ul>
<h3 id="2-代码演示">2 代码演示</h3>
<h4 id="21-bean生命周期控制">2.1 Bean生命周期控制</h4>
<ul>
<li>提供生命周期控制方法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book dao save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//表示bean初始化对应的操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;init...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//表示bean销毁前对应的操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destory</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;destory...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>applicationContext.xml配置</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--init-method：设置bean初始化生命周期回调函数,此处填写init方法名--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--destroy-method：设置bean销毁生命周期回调函数，仅适用于单例对象，此处填写destory方法名--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bookDao&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span> <span class="na">init-method=</span><span class="s">&#34;init&#34;</span> <span class="na">destroy-method=</span><span class="s">&#34;destory&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>测试类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppForLifeCycle</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span> <span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//此处需要使用实现类类型，接口类型没有close方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ClassPathXmlApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">BookDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//关闭容器，执行销毁的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ctx</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="22-bean生命周期控制">2.2 Bean生命周期控制</h4>
<ul>
<li>实现InitializingBean, DisposableBean接口</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span><span class="o">,</span> <span class="n">InitializingBean</span><span class="o">,</span> <span class="n">DisposableBean</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBookDao</span><span class="o">(</span><span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;set .....&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">bookDao</span> <span class="o">=</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book service save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;service destroy&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterPropertiesSet</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;service init&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>测试类代码同《3.2.1 Bean生命周期控制》中的测试代码</p>
</blockquote>
<h3 id="3-bean销毁时机">3 Bean销毁时机</h3>
<ul>
<li>容器关闭前触发bean的销毁</li>
<li>关闭容器方式：
<ul>
<li>手工关闭容器
<code>ConfigurableApplicationContext</code>接口<code>close()</code>操作</li>
<li>注册关闭钩子，在虚拟机退出前先关闭容器再退出虚拟机
<code>ConfigurableApplicationContext</code>接口<code>registerShutdownHook()</code>操作</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppForLifeCycle</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span> <span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//此处需要使用实现类类型，接口类型没有close方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ClassPathXmlApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">BookDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//注册关闭钩子函数，在虚拟机退出之前回调此函数，关闭容器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ctx</span><span class="o">.</span><span class="na">registerShutdownHook</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//关闭容器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ctx.close();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="六依赖注入di配置">六、依赖注入(DI配置)</h2>
<h3 id="1-依赖注入方式重点">1 依赖注入方式【重点】</h3>
<h4 id="问题导入-9">问题导入</h4>
<p>依赖注入有几种方式？</p>
<h4 id="11-依赖注入的两种方式">1.1 依赖注入的两种方式</h4>
<ul>
<li>setter注入
简单类型
==<strong>引用类型(很常用)</strong>==</li>
<li>构造器注入
简单类型
引用类型</li>
</ul>
<h4 id="12-setter方式注入">1.2 setter方式注入</h4>
<h5 id="问题导入-10">问题导入</h5>
<p>setter方式注入使用什么子标签？</p>
<h5 id="引用类型">引用类型</h5>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729203626540.png"
        data-srcset="/assets/image-20210729203626540.png, /assets/image-20210729203626540.png 1.5x, /assets/image-20210729203626540.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729203626540.png"
        title="image-20210729203626540" /></p>
<h5 id="简单类型">简单类型</h5>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729203728173.png"
        data-srcset="/assets/image-20210729203728173.png, /assets/image-20210729203728173.png 1.5x, /assets/image-20210729203728173.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729203728173.png"
        title="image-20210729203728173" /></p>
<h4 id="13-构造方式注入">1.3 构造方式注入</h4>
<h5 id="问题导入-11">问题导入</h5>
<p>构造方式注入使用什么子标签？</p>
<h5 id="引用类型-1">引用类型</h5>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729203859855.png"
        data-srcset="/assets/image-20210729203859855.png, /assets/image-20210729203859855.png 1.5x, /assets/image-20210729203859855.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729203859855.png"
        title="image-20210729203859855" /></p>
<h5 id="简单类型-1">简单类型</h5>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729204006542.png"
        data-srcset="/assets/image-20210729204006542.png, /assets/image-20210729204006542.png 1.5x, /assets/image-20210729204006542.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729204006542.png"
        title="image-20210729204006542" /></p>
<h5 id="参数适配了解">参数适配【了解】</h5>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210729204117697.png"
        data-srcset="/assets/image-20210729204117697.png, /assets/image-20210729204117697.png 1.5x, /assets/image-20210729204117697.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210729204117697.png"
        title="image-20210729204117697" /></p>
<h4 id="14-依赖注入方式选择">1.4 依赖注入方式选择</h4>
<ol>
<li>强制依赖使用构造器进行，使用setter注入有概率不进行注入导致null对象出现</li>
<li>可选依赖使用setter注入进行，灵活性强</li>
<li>Spring框架倡导使用构造器，第三方框架内部大多数采用构造器注入的形式进行数据初始化，相对严谨</li>
<li>如果有必要可以两者同时使用，使用构造器注入完成强制依赖的注入，使用setter注入完成可选依赖的注入</li>
<li>实际开发过程中还要根据实际情况分析，如果受控对象没有提供setter方法就必须使用构造器注入</li>
<li><strong>==自己开发的模块推荐使用setter注入==</strong></li>
</ol>
<h3 id="2-依赖自动装配理解">2 依赖自动装配【理解】</h3>
<h4 id="问题导入-12">问题导入</h4>
<p>如何配置按照类型自动装配？</p>
<h4 id="21-自动装配概念">2.1 自动装配概念</h4>
<ul>
<li>IoC容器根据bean所依赖的资源在容器中自动查找并注入到bean中的过程称为自动装配</li>
<li>自动装配方式
==按类型（常用）==
按名称
按构造方法
不启用自动装配</li>
</ul>
<h4 id="22-自动装配类型">2.2 自动装配类型</h4>
<h5 id="依赖自动装配">依赖自动装配</h5>
<blockquote>
<p>配置中使用bean标签autowire属性设置自动装配的类型</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bookDao&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.dao.impl.BookDaoImpl&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bookService&#34;</span> <span class="na">class=</span><span class="s">&#34;com.itheima.service.impl.BookServiceImpl&#34;</span> <span class="na">autowire=</span><span class="s">&#34;byType&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="依赖自动装配特征">依赖自动装配特征</h5>
<ol>
<li>自动装配用于引用类型依赖注入，不能对简单类型进行操作</li>
<li>使用按类型装配时（byType）必须保障容器中相同类型的bean唯一，推荐使用</li>
<li>使用按名称装配时（byName）必须保障容器中具有指定名称的bean，因变量名与配置耦合，不推荐使用</li>
<li>自动装配优先级低于setter注入与构造器注入，同时出现时自动装配配置失效</li>
</ol>
<h3 id="3-集合注入">3 集合注入</h3>
<h4 id="31-注入数组类型数据">3.1 注入数组类型数据</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;array&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;array&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>100<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>200<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>300<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/array&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="32-注入list类型数据">3.2 注入List类型数据</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;list&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;list&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>itcast<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>itheima<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>boxuegu<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>chuanzhihui<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/list&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="33-注入set类型数据">3.3 注入Set类型数据</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;set&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;set&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>itcast<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>itheima<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>boxuegu<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>boxuegu<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/set&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="34-注入map类型数据">3.4 注入Map类型数据</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;map&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;map&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&#34;country&#34;</span> <span class="na">value=</span><span class="s">&#34;china&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&#34;province&#34;</span> <span class="na">value=</span><span class="s">&#34;henan&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&#34;city&#34;</span> <span class="na">value=</span><span class="s">&#34;kaifeng&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/map&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="35-注入properties类型数据">3.5 注入Properties类型数据</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;properties&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;props&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&#34;country&#34;</span><span class="nt">&gt;</span>china<span class="nt">&lt;/prop&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&#34;province&#34;</span><span class="nt">&gt;</span>henan<span class="nt">&lt;/prop&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&#34;city&#34;</span><span class="nt">&gt;</span>kaifeng<span class="nt">&lt;/prop&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/props&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>说明：property标签表示setter方式注入，构造方式注入constructor-arg标签内部也可以写&lt;array&gt;、&lt;list&gt;、&lt;set&gt;、&lt;map&gt;、&lt;props&gt;标签</p>
</blockquote>
<h2 id="今日目标">今日目标</h2>
<ul>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> 能够掌握注解开发定义Bean对象</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> 能够掌握纯注解开发模式</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> 能够配置注解开发依赖注入</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> 能够配置注解开发管理第三方Bean</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> 能够配置注解开发为第三方Bean注入资源</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> 能够使用Spring整合Mybatis</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> 能够使用Spring整合Junit</li>
</ul>
<h2 id="一第三方资源配置管理">一、第三方资源配置管理</h2>
<blockquote>
<p>说明：以管理DataSource连接池对象为例讲解第三方资源配置管理</p>
</blockquote>
<h3 id="1-管理datasource连接池对象">1 管理DataSource连接池对象</h3>
<h4 id="问题导入-13">问题导入</h4>
<p>配置数据库连接参数时，注入驱动类名是用driverClassName还是driver？</p>
<h4 id="11-管理druid连接池重点">1.1 管理Druid连接池【重点】</h4>
<p><strong>数据库准备</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">spring_db</span><span class="w"> </span><span class="nb">character</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">utf8</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">spring_db</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">tbl_account</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">money</span><span class="w"> </span><span class="n">double</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tbl_account</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;Tom&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tbl_account</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;Jerry&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第一步】添加Druid连接池依赖</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>druid<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.1.16<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>5.1.47<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>注意：除了添加以上两个依赖之外，别忘了添加spring-context依赖。</p>
</blockquote>
<p><strong>【第二步】配置DruidDataSource连接池Bean对象</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dataSource&#34;</span> <span class="na">class=</span><span class="s">&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driverClassName&#34;</span> <span class="na">value=</span><span class="s">&#34;com.mysql.jdbc.Driver&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第三步】在测试类中从IOC容器中获取连接池对象并打印</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">DataSource</span> <span class="n">dataSource</span> <span class="o">=</span> <span class="o">(</span><span class="n">DataSource</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;dataSource&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="12-管理c3p0连接池">1.2 管理c3p0连接池</h4>
<p><strong>【第一步】添加c3p0连接池依赖</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>c3p0<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>c3p0<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>0.9.1.2<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第二步】配置c3p0连接池Bean对象</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dataSource&#34;</span> <span class="na">class=</span><span class="s">&#34;com.mchange.v2.c3p0.ComboPooledDataSource&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driverClass&#34;</span> <span class="na">value=</span><span class="s">&#34;com.mysql.jdbc.Driver&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;jdbcUrl&#34;</span> <span class="na">value=</span><span class="s">&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;user&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;maxPoolSize&#34;</span> <span class="na">value=</span><span class="s">&#34;1000&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>注意：同一个Spring容器中不能有两个id=&ldquo;dataSource&quot;的连接池。</p>
</blockquote>
<p><strong>【第三步】在测试类中从IOC容器中获取连接池对象并打印</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">DataSource</span> <span class="n">dataSource</span> <span class="o">=</span> <span class="o">(</span><span class="n">DataSource</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;dataSource&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2-加载properties属性文件重点">2 加载properties属性文件【重点】</h3>
<blockquote>
<p>目的：将数据库的连接参数抽取到一个单独的文件中，与Spring配置文件解耦。</p>
</blockquote>
<h4 id="问题导入-14">问题导入</h4>
<p>问题1：如何解决使用EL表达式读取属性文件中的值结果读取到了系统属性问题？</p>
<p>问题2：加载properties文件写法标准写法该怎么写？</p>
<h4 id="21-基本用法">2.1 基本用法</h4>
<p><strong>【第一步】编写jdbc.properties属性文件</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jdbc.driver=com.mysql.jdbc.Driver
</span></span><span class="line"><span class="cl">jdbc.url=jdbc:mysql://127.0.0.1:3306/spring_db
</span></span><span class="line"><span class="cl">jdbc.username=root
</span></span><span class="line"><span class="cl">jdbc.password=root
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第二步】在applicationContext.xml中开启开启context命名空间，加载jdbc.properties属性文件</strong></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730101826913.png"
        data-srcset="/assets/image-20210730101826913.png, /assets/image-20210730101826913.png 1.5x, /assets/image-20210730101826913.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730101826913.png"
        title="image-20210730101826913" /></p>
<p><strong>==小技巧：如果同学们觉得上述复制粘贴方式不好改或者容易改错，其实idea是有提示功能的，注意不要选错就行了。有些版本的idea没有这个提示，那么就按照上面复制粘贴的方式改，改完之后可以做成live template模板，后期直接用。==</strong></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730102053281.png"
        data-srcset="/assets/image-20210730102053281.png, /assets/image-20210730102053281.png 1.5x, /assets/image-20210730102053281.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730102053281.png"
        title="image-20210730102053281" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;jdbc.properties&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第三步】在配置连接池Bean的地方使用EL表达式获取jdbc.properties属性文件中的值</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driverClassName&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.driver}&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.url}&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.username}&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;${jdbc.password}&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>配置完成之后，运行之前的获取Druid连接池代码，可以获取到连接池对象就表示配置成功。</p>
</blockquote>
<h4 id="22-配置不加载系统属性">2.2 配置不加载系统属性</h4>
<p><strong>问题</strong></p>
<p>如果属性文件中配置的不是jdbc.username，而是username=root666，那么使用${username}获取到的不是root666，而是计算机的名称。</p>
<p><strong>原因</strong></p>
<p>系统属性的优先级比我们属性文件中的高，替换了我们的username=root666。</p>
<p><strong>解决</strong></p>
<p>解决1：换一个名称，例如不叫username，叫jdbc.username。</p>
<p>解决2：使用system-properties-mode=&ldquo;NEVER&quot;属性表示不使用系统属性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;context:property-placeholder location=&#34;jdbc.properties&#34; system-properties-mode=&#34;NEVER&#34;/&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="23-加载properties文件写法">2.3 加载properties文件写法</h4>
<ul>
<li>不加载系统属性</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;jdbc.properties&#34;</span> <span class="na">system-properties-mode=</span><span class="s">&#34;NEVER&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>加载多个properties文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;jdbc.properties,msg.properties&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>加载所有properties文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;*.properties&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>加载properties文件**==标准格式==**</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;classpath:*.properties&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>加载properties文件标准格式</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;classpath*:*.properties&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="二spring容器">二、Spring容器</h2>
<h3 id="1-spring核心容器介绍">1 Spring核心容器介绍</h3>
<h4 id="问题导入-15">问题导入</h4>
<p>问题：按照Bean名称获取Bean有什么弊端，按照Bean类型获取Bean有什么弊端？</p>
<h4 id="11-创建容器">1.1 创建容器</h4>
<ul>
<li>方式一：类路径加载配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>方式二：文件路径加载配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileSystemXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;D:\\applicationContext.xml&#34;</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>加载多个配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;bean1.xml&#34;</span><span class="o">,</span> <span class="s">&#34;bean2.xml&#34;</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="12-获取bean对象">1.2 获取bean对象</h4>
<ul>
<li>方式一：使用bean名称获取</li>
</ul>
<blockquote>
<p>弊端：需要自己强制类型转换</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">BookDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>==方式二：使用bean名称获取并指定类型==</strong></li>
</ul>
<blockquote>
<p>弊端：推荐使用</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">,</span> <span class="n">BookDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>方式三：使用bean类型获取</li>
</ul>
<blockquote>
<p>弊端：如果IOC容器中同类型的Bean对象有多个，此处获取会报错</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">BookDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="13-容器类层次结构">1.3 容器类层次结构</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="D:/BaiduNetdiskDownload/04%e9%98%b6%e6%ae%b5%e5%9b%9b%ef%bc%9a%e7%83%ad%e9%97%a8%e6%a1%86%e6%9e%b6/01%e7%ac%ac%e4%b8%80%e7%ab%a0%ef%bc%9a1-Spring%e6%a1%86%e6%9e%b6/day02_Spring%e6%a1%86%e6%9e%b6/03-%e8%ae%b2%e4%b9%89//assets/image-20210730102842030.png"
        data-srcset="D:/BaiduNetdiskDownload/04%e9%98%b6%e6%ae%b5%e5%9b%9b%ef%bc%9a%e7%83%ad%e9%97%a8%e6%a1%86%e6%9e%b6/01%e7%ac%ac%e4%b8%80%e7%ab%a0%ef%bc%9a1-Spring%e6%a1%86%e6%9e%b6/day02_Spring%e6%a1%86%e6%9e%b6/03-%e8%ae%b2%e4%b9%89//assets/image-20210730102842030.png, D:/BaiduNetdiskDownload/04%e9%98%b6%e6%ae%b5%e5%9b%9b%ef%bc%9a%e7%83%ad%e9%97%a8%e6%a1%86%e6%9e%b6/01%e7%ac%ac%e4%b8%80%e7%ab%a0%ef%bc%9a1-Spring%e6%a1%86%e6%9e%b6/day02_Spring%e6%a1%86%e6%9e%b6/03-%e8%ae%b2%e4%b9%89//assets/image-20210730102842030.png 1.5x, D:/BaiduNetdiskDownload/04%e9%98%b6%e6%ae%b5%e5%9b%9b%ef%bc%9a%e7%83%ad%e9%97%a8%e6%a1%86%e6%9e%b6/01%e7%ac%ac%e4%b8%80%e7%ab%a0%ef%bc%9a1-Spring%e6%a1%86%e6%9e%b6/day02_Spring%e6%a1%86%e6%9e%b6/03-%e8%ae%b2%e4%b9%89//assets/image-20210730102842030.png 2x"
        data-sizes="auto"
        alt="D:/BaiduNetdiskDownload/04阶段四：热门框架/01第一章：1-Spring框架/day02_Spring框架/03-讲义//assets/image-20210730102842030.png"
        title="image-20210730102842030" /></p>
<h4 id="14-beanfactory">1.4 BeanFactory</h4>
<ul>
<li>类路径加载配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Resource</span> <span class="n">resources</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathResource</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">BeanFactory</span> <span class="n">bf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XmlBeanFactory</span><span class="o">(</span><span class="n">resources</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="n">bf</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">,</span> <span class="n">BookDao</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>BeanFactory创建完毕后，所有的Bean均为延迟加载，也就是说我们调用getBean()方法获取Bean对象时才创建Bean对象并返回给我们</li>
</ul>
<h3 id="2-spring核心容器总结">2 Spring核心容器总结</h3>
<h4 id="21-容器相关">2.1 容器相关</h4>
<ul>
<li>BeanFactory是IoC容器的顶层接口，初始化BeanFactory对象时，加载的bean延迟加载</li>
<li>ApplicationContext接口是Spring容器的核心接口，初始化时bean立即加载</li>
<li>ApplicationContext接口提供基础的bean操作相关方法，通过其他接口扩展其功能</li>
<li>ApplicationContext接口常用初始化类
<ul>
<li><strong>==ClassPathXmlApplicationContext(常用)==</strong></li>
<li>FileSystemXmlApplicationContext</li>
</ul>
</li>
</ul>
<h4 id="22-bean相关">2.2 bean相关</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730103438742.png"
        data-srcset="/assets/image-20210730103438742.png, /assets/image-20210730103438742.png 1.5x, /assets/image-20210730103438742.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730103438742.png"
        title="image-20210730103438742" /></p>
<h4 id="23-依赖注入相关">2.3 依赖注入相关</h4>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730103701525.png"
        data-srcset="/assets/image-20210730103701525.png, /assets/image-20210730103701525.png 1.5x, /assets/image-20210730103701525.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730103701525.png"
        title="image-20210730103701525" /></p>
<h2 id="三spring注解开发">三、Spring注解开发</h2>
<h3 id="1-注解开发定义bean对象重点">1 注解开发定义Bean对象【重点】</h3>
<blockquote>
<p>目的：xml配置Bean对象有些繁琐，使用注解简化Bean对象的定义</p>
</blockquote>
<h4 id="问题导入-16">问题导入</h4>
<p>问题1：使用什么标签进行Spring注解包扫描？</p>
<p>问题2：@Component注解和@Controller、@Service、@Repository三个衍生注解有什么区别？</p>
<h4 id="11-基本使用">1.1 基本使用</h4>
<p><strong>【第一步】在applicationContext.xml中开启Spring注解包扫描</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:context=</span><span class="s">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xsi:schemaLocation=</span><span class="s">&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span class="line"><span class="cl"><span class="s">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">	 <span class="c">&lt;!--扫描com.itheima包及其子包下的类中注解--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.itheima&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第二步】在类上使用@Component注解定义Bean。</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//@Component定义bean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Component</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book dao save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Component</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBookDao</span><span class="o">(</span><span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">bookDao</span> <span class="o">=</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book service save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>补充说明：如果@Component注解没有使用参数指定Bean的名称，那么类名首字母小写就是Bean在IOC容器中的默认名称。例如：BookServiceImpl对象在IOC容器中的名称是bookServiceImpl。</p>
</blockquote>
<p><strong>【第三步】在测试类中获取Bean对象</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppForAnnotation</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">BookDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bookDao</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//按类型获取bean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">BookService</span> <span class="n">bookService</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">BookService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bookService</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>注意：在测试类中不要调用bookService的save方法，因为还没有给BookServiceImpl中的bookDao赋值，调用bookService的save方法会出现空指针异常。</p>
</blockquote>
<p><strong>运行结果</strong></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730104835746.png"
        data-srcset="/assets/image-20210730104835746.png, /assets/image-20210730104835746.png 1.5x, /assets/image-20210730104835746.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730104835746.png"
        title="image-20210730104835746" /></p>
<h4 id="12-component三个衍生注解">1.2 @Component三个衍生注解</h4>
<blockquote>
<p>说明：加粗的注解为常用注解</p>
</blockquote>
<ul>
<li>Spring提供**<code>@Component</code>**注解的三个衍生注解
<ul>
<li><strong><code>@Controller</code></strong>：用于表现层bean定义</li>
<li><strong><code>@Service</code></strong>：用于业务层bean定义</li>
<li><code>@Repository</code>：用于数据层bean定义</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Repository</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2-纯注解开发模式重点">2 纯注解开发模式【重点】</h3>
<h4 id="问题导入-17">问题导入</h4>
<p>问题1：配置类上使用什么注解表示该类是一个配置类？</p>
<p>问题2：配置类上使用什么注解进行Spring注解包扫描？</p>
<h4 id="21-纯注解开发模式介绍">2.1 纯注解开发模式介绍</h4>
<ul>
<li>Spring3.0开启了纯注解开发模式，使用Java类替代配置文件，开启了Spring快速开发赛道</li>
<li>Java类代替Spring核心配置文件</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210803192052811.png"
        data-srcset="/assets/image-20210803192052811.png, /assets/image-20210803192052811.png 1.5x, /assets/image-20210803192052811.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210803192052811.png"
        title="image-20210803192052811" /></p>
<ul>
<li>@Configuration注解用于设定当前类为配置类</li>
<li>@ComponentScan注解用于设定扫描路径，此注解只能添加一次，多个数据请用数组格式</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@ComponentScan</span><span class="o">({</span><span class="n">com</span><span class="o">.</span><span class="na">itheima</span><span class="o">.</span><span class="na">service</span><span class="s">&#34;,&#34;</span><span class="n">com</span><span class="o">.</span><span class="na">itheima</span><span class="o">.</span><span class="na">dao</span><span class="err">&#34;</span><span class="o">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>读取Spring核心配置文件初始化容器对象切换为读取Java配置类初始化容器对象</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//加载配置文件初始化容器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;applicationContext.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//加载配置类初始化容器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">SpringConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="22-代码演示">2.2 代码演示</h4>
<p><strong>【第一步】定义配置类代替配置文件</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//声明当前类为Spring配置类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="c1">//Spring注解扫描，相当于&lt;context:component-scan base-package=&#34;com.itheima&#34;/&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">&#34;com.itheima&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//设置bean扫描路径，多个路径书写为字符串数组格式
</span></span></span><span class="line"><span class="cl"><span class="c1">//@ComponentScan({&#34;com.itheima.service&#34;,&#34;com.itheima.dao&#34;})
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【第二步】在测试类中加载配置类，获取Bean对象并使用</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppForAnnotation</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//AnnotationConfigApplicationContext加载Spring配置类初始化Spring容器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">SpringConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">BookDao</span> <span class="n">bookDao</span> <span class="o">=</span> <span class="o">(</span><span class="n">BookDao</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bookDao</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//按类型获取bean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">BookService</span> <span class="n">bookService</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">BookService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bookService</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="3-注解开发bean作用范围和生命周期管理">3 注解开发Bean作用范围和生命周期管理</h3>
<h4 id="问题导入-18">问题导入</h4>
<p>在类上使用什么注解定义Bean的作用范围？</p>
<h4 id="31-bean作用范围注解配置">3.1 bean作用范围注解配置</h4>
<ul>
<li>使用@Scope定义bean作用范围</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Repository</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Scope</span><span class="o">(</span><span class="s">&#34;singleton&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="32-bean生命周期注解配置">3.2 bean生命周期注解配置</h4>
<ul>
<li>使用@PostConstruct、@PreDestroy定义bean生命周期</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Repository</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Scope</span><span class="o">(</span><span class="s">&#34;singleton&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">BookDaoImpl</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book dao constructor ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@PostConstruct</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book init ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@PreDestroy</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book destory ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>==<strong>注意：@PostConstruct和@PreDestroy注解是jdk中提供的注解，从jdk9开始，jdk中的javax.annotation包被移除了，也就是说这两个注解就用不了了，可以额外导入一下依赖解决这个问题。</strong>==</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>javax.annotation<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>javax.annotation-api<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="4-注解开发依赖注入重点">4 注解开发依赖注入【重点】</h3>
<h4 id="问题导入-19">问题导入</h4>
<p>问题1：请描述@Autowired注解是如何进行自动装配的？</p>
<p>问题2：请描述@Qualifier注解的作用</p>
<h4 id="41-使用autowired注解开启自动装配模式按类型">4.1 使用@Autowired注解开启自动装配模式（按类型）</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//@Autowired：注入引用类型，自动装配模式，默认按类型装配
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Autowired</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book service save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>说明：不管是使用配置文件还是配置类，都必须进行对应的Spring注解包扫描才可以使用。@Autowired默认按照类型自动装配，如果IOC容器中同类的Bean有多个，那么默认按照变量名和Bean的名称匹配，建议使用@Qualifier注解指定要装配的bean名称</p>
</blockquote>
<p>==注意：自动装配基于反射设计创建对象并暴力反射对应属性为私有属性初始化数据，因此无需提供setter方法。==</p>
<h4 id="42-使用qualifier注解指定要装配的bean名称">4.2 使用@Qualifier注解指定要装配的bean名称</h4>
<blockquote>
<p>目的：解决IOC容器中同类型Bean有多个装配哪一个的问题</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookServiceImpl</span> <span class="kd">implements</span> <span class="n">BookService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//@Autowired：注入引用类型，自动装配模式，默认按类型装配
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Autowired</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//@Qualifier：自动装配bean时按bean名称装配
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book service save ...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">bookDao</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>==注意：@Qualifier注解无法单独使用，必须配合@Autowired注解使用==</p>
<h4 id="43-使用value实现简单类型注入">4.3 使用@Value实现简单类型注入</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Repository</span><span class="o">(</span><span class="s">&#34;bookDao&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//@Value：注入简单类型（无需提供set方法）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${name}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;book dao save ...&#34;</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上@Value注解中使用${name}从属性文件中读取name值，那么就需要在配置类或者配置文件中加载属性文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">&#34;com.itheima&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//@PropertySource加载properties配置文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@PropertySource</span><span class="o">({</span><span class="s">&#34;classpath:jdbc.properties&#34;</span><span class="o">})</span> <span class="c1">//{}可以省略不写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>==注意：@PropertySource()中加载多文件请使用数组格式配置，不允许使用通配符*==</p>
<h3 id="5-注解开发管理第三方bean重点">5 注解开发管理第三方Bean【重点】</h3>
<h4 id="问题导入-20">问题导入</h4>
<p>导入自己定义的配置类有几种方式？</p>
<h4 id="第一步单独定义配置类"><strong>【第一步】单独定义配置类</strong></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//@Bean：表示当前方法的返回值是一个bean对象，添加到IOC容器中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">dataSource</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">DruidDataSource</span> <span class="n">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DruidDataSource</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setDriverClassName</span><span class="o">(</span><span class="s">&#34;com.mysql.jdbc.Driver&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="s">&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ds</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="第二步将独立的配置类加入核心配置"><strong>【第二步】将独立的配置类加入核心配置</strong></h4>
<h5 id="方式1import注解导入式">方式1：@Import注解导入式</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">&#34;com.itheima&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//@Import:导入配置信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Import</span><span class="o">({</span><span class="n">JdbcConfig</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="方式2componentscan扫描式">方式2：@ComponentScan扫描式</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="nd">@ComponentScan</span><span class="o">({</span><span class="s">&#34;com.itheima.config&#34;</span><span class="o">,</span><span class="s">&#34;com.itheima.service&#34;</span><span class="o">,</span><span class="s">&#34;com.itheima.dao&#34;</span><span class="o">})</span>  <span class="c1">//只要com.itheima.config包扫到了就行，三个包可以合并写成com.itheima
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="6-注解开发为第三方bean注入资源重点">6 注解开发为第三方Bean注入资源【重点】</h3>
<h4 id="问题导入-21">问题导入</h4>
<p>配置类中如何注入简单类型数据，如何注入引用类型数据？</p>
<h4 id="61-简单类型依赖注入">6.1 简单类型依赖注入</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//1.定义一个方法获得要管理的对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;com.mysql.jdbc.Driver&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">driver</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;jdbc:mysql://localhost:3306/spring_db&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">url</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">userName</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//2.@Bean：表示当前方法的返回值是一个bean对象，添加到IOC容器中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">dataSource</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">DruidDataSource</span> <span class="n">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DruidDataSource</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setDriverClassName</span><span class="o">(</span><span class="n">driver</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">userName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">password</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ds</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>说明：如果@Value()中使用了EL表达式读取properties属性文件中的内容，那么就需要加载properties属性文件。</p>
</blockquote>
<h4 id="62-引用类型依赖注入">6.2 引用类型依赖注入</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//Spring会自动从IOC容器中找到BookDao对象赋值给参数bookDao变量，如果没有就会报错。
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Bean</span> 
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">dataSource</span><span class="o">(</span><span class="n">BookDao</span> <span class="n">bookDao</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bookDao</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">DruidDataSource</span> <span class="n">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DruidDataSource</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">ds</span><span class="o">.</span><span class="na">setDriverClassName</span><span class="o">(</span><span class="n">driver</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ds</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ds</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">userName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ds</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">password</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ds</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>说明：引用类型注入只需要为bean定义方法设置形参即可，容器会根据类型自动装配对象</p>
</blockquote>
<h3 id="7-注解开发总结">7 注解开发总结</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730113548708.png"
        data-srcset="/assets/image-20210730113548708.png, /assets/image-20210730113548708.png 1.5x, /assets/image-20210730113548708.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730113548708.png"
        title="image-20210730113548708" /></p>
<h2 id="四spring整合其他技术重点">四、Spring整合其他技术【重点】</h2>
<h3 id="1-spring整合mybatis重点">1 Spring整合mybatis【重点】</h3>
<h4 id="11-思路分析">1.1 思路分析</h4>
<h5 id="问题导入-22">问题导入</h5>
<p>mybatis进行数据层操作的核心对象是谁？</p>
<h5 id="111-mybatis程序核心对象分析">1.1.1 MyBatis程序核心对象分析</h5>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730114303147.png"
        data-srcset="/assets/image-20210730114303147.png, /assets/image-20210730114303147.png 1.5x, /assets/image-20210730114303147.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730114303147.png"
        title="image-20210730114303147" /></p>
<h5 id="112-整合mybatis">1.1.2 整合MyBatis</h5>
<ul>
<li>使用SqlSessionFactoryBean封装SqlSessionFactory需要的环境信息</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730114342060.png"
        data-srcset="/assets/image-20210730114342060.png, /assets/image-20210730114342060.png 1.5x, /assets/image-20210730114342060.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730114342060.png"
        title="image-20210730114342060" /></p>
<ul>
<li>使用MapperScannerConfigurer加载Dao接口，创建代理对象保存到IOC容器中</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20210730114356175.png"
        data-srcset="/assets/image-20210730114356175.png, /assets/image-20210730114356175.png 1.5x, /assets/image-20210730114356175.png 2x"
        data-sizes="auto"
        alt="/assets/image-20210730114356175.png"
        title="image-20210730114356175" /></p>
<h4 id="12-代码实现">1.2 代码实现</h4>
<h5 id="问题导入-23">问题导入</h5>
<p>问题1：Spring整合mybatis的依赖叫什么？</p>
<p>问题2：Spring整合mybatis需要管理配置哪两个Bean，这两个Bean作用分别是什么？</p>
<h5 id="前置工作">【前置工作】</h5>
<ol>
<li>在pom.xml中添加spring-context、druid、mybatis、mysql-connector-java等基础依赖。</li>
<li>准备service和dao层基础代码</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AccountService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Account</span> <span class="nf">findById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AccountServiceImpl</span> <span class="kd">implements</span> <span class="n">AccountService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Autowired</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">AccountDao</span> <span class="n">accountDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">accountDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">account</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">accountDao</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">account</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">accountDao</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Account</span> <span class="nf">findById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">accountDao</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">accountDao</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AccountDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Insert</span><span class="o">(</span><span class="s">&#34;insert into tbl_account(name,money)values(#{name},#{money})&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Delete</span><span class="o">(</span><span class="s">&#34;delete from tbl_account where id = #{id} &#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Update</span><span class="o">(</span><span class="s">&#34;update tbl_account set name = #{name} , money = #{money} where id = #{id} &#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from tbl_account&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from tbl_account where id = #{id} &#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">Account</span> <span class="nf">findById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="第一步导入spring整合mybatis依赖"><strong>【第一步】导入Spring整合Mybatis依赖</strong></h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>spring-jdbc<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>5.2.10.RELEASE<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>mybatis-spring<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.3.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="第二步创建jdbcconfig配置datasource数据源"><strong>【第二步】创建JdbcConfig配置DataSource数据源</strong></h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jdbc.driver=com.mysql.jdbc.Driver
</span></span><span class="line"><span class="cl">jdbc.url=jdbc:mysql://localhost:3306/spring_db?useSSL=false
</span></span><span class="line"><span class="cl">jdbc.username=root
</span></span><span class="line"><span class="cl">jdbc.password=root
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${jdbc.driver}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">driver</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${jdbc.url}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">url</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${jdbc.username}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">userName</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${jdbc.password}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">dataSource</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">DruidDataSource</span> <span class="n">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DruidDataSource</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setDriverClassName</span><span class="o">(</span><span class="n">driver</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">userName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ds</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">password</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ds</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="第三步创建mybatisconfig整合mybatis"><strong>【第三步】创建MybatisConfig整合mybatis</strong></h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MybatisConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//定义bean，SqlSessionFactoryBean，用于产生SqlSessionFactory对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">SqlSessionFactoryBean</span> <span class="nf">sqlSessionFactory</span><span class="o">(</span><span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">SqlSessionFactoryBean</span> <span class="n">ssfb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SqlSessionFactoryBean</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">ssfb</span><span class="o">.</span><span class="na">setTypeAliasesPackage</span><span class="o">(</span><span class="s">&#34;com.itheima.domain&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ssfb</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ssfb</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//定义bean，返回MapperScannerConfigurer对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">MapperScannerConfigurer</span> <span class="nf">mapperScannerConfigurer</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">MapperScannerConfigurer</span> <span class="n">msc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MapperScannerConfigurer</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">msc</span><span class="o">.</span><span class="na">setBasePackage</span><span class="o">(</span><span class="s">&#34;com.itheima.dao&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">msc</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="第四步创建springconfig主配置类进行包扫描和加载其他配置类"><strong>【第四步】创建SpringConfig主配置类进行包扫描和加载其他配置类</strong></h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="nd">@ComponentScan</span><span class="o">(</span><span class="s">&#34;com.itheima&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//@PropertySource：加载类路径jdbc.properties文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@PropertySource</span><span class="o">(</span><span class="s">&#34;classpath:jdbc.properties&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Import</span><span class="o">({</span><span class="n">JdbcConfig</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="n">MybatisConfig</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="第五步定义测试类进行测试"><strong>【第五步】定义测试类进行测试</strong></h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">SpringConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">AccountService</span> <span class="n">accountService</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">AccountService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Account</span> <span class="n">ac</span> <span class="o">=</span> <span class="n">accountService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ac</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2-spring整合junit单元测试重点">2 Spring整合Junit单元测试【重点】</h3>
<h4 id="问题导入-24">问题导入</h4>
<p>Spring整合Junit的两个注解作用分别是什么？</p>
<h4 id="第一步导入整合的依赖坐标spring-test">【第一步】导入整合的依赖坐标spring-test</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--junit--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;version&gt;</span>4.12<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--spring整合junit--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>spring-test<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;version&gt;</span>5.1.9.RELEASE<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="第二步使用spring整合junit专用的类加载器">【第二步】使用Spring整合Junit专用的类加载器</h4>
<h4 id="第三步加载配置文件或者配置类">【第三步】加载配置文件或者配置类</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//【第二步】使用Spring整合Junit专用的类加载器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@RunWith</span><span class="o">(</span><span class="n">SpringJUnit4ClassRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//【第三步】加载配置文件或者配置类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="o">{</span><span class="n">SpringConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">})</span> <span class="c1">//加载配置类
</span></span></span><span class="line"><span class="cl"><span class="c1">//@ContextConfiguration(locations={&#34;classpath:applicationContext.xml&#34;})//加载配置文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AccountServiceTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//支持自动装配注入bean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Autowired</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">AccountService</span> <span class="n">accountService</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testFindById</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">accountService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">1</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testFindAll</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">accountService</span><span class="o">.</span><span class="na">findAll</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>==注意：junit的依赖至少要是4.12版本,可以是4.13等版本,否则出现如下异常：==</strong></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/assets/image-20200831155517797.png"
        data-srcset="/assets/image-20200831155517797.png, /assets/image-20200831155517797.png 1.5x, /assets/image-20200831155517797.png 2x"
        data-sizes="auto"
        alt="/assets/image-20200831155517797.png"
        title="image-20200831155517797" /></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2022-09-06</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/spring%E7%AC%AC%E4%B8%80%E5%A4%A9/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://yhaiyong.github.io/spring%E7%AC%AC%E4%B8%80%E5%A4%A9/" data-title="Spring第一天"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/mysql/" class="prev" rel="prev" title="MySql"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>MySql</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Young</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
